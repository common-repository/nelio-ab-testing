(()=>{var e,t={9170:(e,t,n)=>{"use strict";n.r(t),n.d(t,{editor:()=>o});var r={};n.r(r),n.d(r,{getActiveGoal:()=>H,getActiveGoalIndex:()=>W,getActiveSegment:()=>Y,getActiveSegmentIndex:()=>X,getAlternative:()=>M,getAlternativeIds:()=>U,getAlternativePreviewerUrl:()=>J,getAlternatives:()=>V,getConversionActions:()=>j,getDraftStatusRationale:()=>z,getExperimentAttribute:()=>K,getExperimentId:()=>Q,getExperimentType:()=>$,getGoals:()=>te,getHeatmapAttribute:()=>Z,getScope:()=>ne,getSegmentEvaluation:()=>ae,getSegmentationRules:()=>ie,getSegments:()=>re,hasExperimentBeenRecentlySaved:()=>q,isExperimentBeingSaved:()=>F,isTestedElementInvalid:()=>ee});var i={};n.r(i),n.d(i,{addAlternatives:()=>oe,addConversionActionsIntoGoal:()=>ue,addGoals:()=>we,addScopeRules:()=>Te,addSegmentationRulesIntoSegment:()=>ke,addSegments:()=>Oe,closeAlternativePreviewer:()=>ye,openAlternativePreviewer:()=>_e,removeAlternatives:()=>se,removeConversionActionsFromGoal:()=>de,removeGoals:()=>Ne,removeScopeRules:()=>Re,removeSegmentationRulesFromSegment:()=>Ge,removeSegments:()=>De,replaceAlternatives:()=>le,replaceConversionActionsInGoal:()=>me,replaceSegmentationRulesInSegment:()=>Pe,setActiveGoal:()=>ge,setActiveSegment:()=>fe,setAlternative:()=>ce,setDraftStatusRationale:()=>Ee,setExperimentAsBeingSaved:()=>be,setExperimentAsRecentlySaved:()=>xe,setExperimentData:()=>he,setHeatmapData:()=>Se,setSegmentEvaluation:()=>Le,setTestedElementAsInvalid:()=>Ae,setupEditor:()=>ve,updateConversionAction:()=>pe,updateGoal:()=>Ie,updateSegment:()=>Ce,updateSegmentationRule:()=>Be});var a={};n.r(a),n.d(a,{moveToTrash:()=>et,resumeExperiment:()=>nt,saveExperiment:()=>$e,saveExperimentAndEditAlternative:()=>Ke,saveExperimentAndPreviewAlternative:()=>Ze,startExperiment:()=>tt});var o={};n.r(o),n.d(o,{EditorProvider:()=>ut,ExperimentName:()=>Yt,Header:()=>Lt,Sidebar:()=>Br,initializeExperimentEditor:()=>si,store:()=>ct});const s=window.wp.element;window.wp.coreData;const l=window.wp.data;function c(e,t){return(0,l.useSelect)(e,t)}const u=window.wp.domReady,m=n.n(u)(),d=window.lodash,p=window.nab.conversionActionLibrary,v=window.nab.data,g=window.nab.experimentLibrary,f=window.nab.segmentationRuleLibrary,b=window.nab.utils;var E=function(){return E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},E.apply(this,arguments)},x={activeGoalId:"",activeSegmentId:"",alternativePreviewerUrl:"",draftStatusRationale:"",hasExperimentBeenRecentlySaved:!1,isExperimentBeingSaved:!1},_=function(){return _=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},_.apply(this,arguments)},y=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},h={byId:{control:{id:"control",attributes:{},links:{edit:"",heatmap:"",preview:""}}},allIds:[]},S=function(){return S=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},S.apply(this,arguments)},A={},w=function(){return w=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},w.apply(this,arguments)},N={id:0,type:"",status:"draft",name:"",description:"",startDate:"",endDate:"",endMode:"manual",endValue:0,isTestedElementInvalid:!1,links:{edit:"",preview:""}},I=function(){return I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},I.apply(this,arguments)},T={},R=function(){return R=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},R.apply(this,arguments)},O={},D=function(){return D=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},D.apply(this,arguments)},C={evaluation:"tested-page",rules:{},segments:{}};const k=(0,l.combineReducers)({editor:function(e,t){var n;return void 0===e&&(e=x),null!==(n=function(e,t){switch(t.type){case"SET_ACTIVE_GOAL":return E(E({},e),{activeGoalId:t.goalId});case"SET_ACTIVE_SEGMENT":return E(E({},e),{activeSegmentId:t.segmentId});case"SET_EXPERIMENT_AS_BEING_SAVED":return E(E({},e),{isExperimentBeingSaved:!!t.status});case"SET_EXPERIMENT_AS_RECENTLY_SAVED":return E(E({},e),{hasExperimentBeenRecentlySaved:!0});case"SET_DRAFT_STATUS_RATIONALE":return E(E({},e),{draftStatusRationale:t.rationale});case"OPEN_ALTERNATIVE_PREVIEWER":return E(E({},e),{alternativePreviewerUrl:t.url});case"CLOSE_ALTERNATIVE_PREVIEWER":return E(E({},e),{alternativePreviewerUrl:""});case"SETUP_EDITOR":return e}}(e=E(E({},e),{hasExperimentBeenRecentlySaved:!1}),t))&&void 0!==n?n:e},experiment:(0,l.combineReducers)({alternatives:function(e,t){var n;return void 0===e&&(e=h),null!==(n=function(e,t){var n;switch(t.type){case"ADD_ALTERNATIVES":return{byId:_(_({},e.byId),(0,d.keyBy)(t.alternatives,"id")),allIds:y(y([],e.allIds,!0),(0,d.map)(t.alternatives,"id"),!0)};case"REMOVE_ALTERNATIVES":return{byId:_({control:e.byId.control},(0,d.omit)(e.byId,t.ids)),allIds:(0,d.difference)(e.allIds,t.ids.filter((function(e){return"control"!==e})))};case"REPLACE_ALTERNATIVES":var r=(0,d.zip)(t.oldIds,(0,d.map)(t.alternatives,"id"));return{byId:_(_({control:e.byId.control},(0,d.omit)(e.byId,t.oldIds)),(0,d.keyBy)(t.alternatives,"id")),allIds:y(y([],e.allIds.map((function(e){var t=r.find((function(t){return t[0]===e}));return t?t[1]:e})).filter(b.isDefined),!0),r.filter((function(e){return!e[0]})).map((function(e){return e[1]})).filter(b.isDefined),!0)};case"SET_ALTERNATIVE":return!t.alternative||(0,b.isEmpty)(t.alternative)||(0,b.isEmpty)(e.byId[t.id])?e:_(_({},e),{byId:_(_({},e.byId),(n={},n[t.id]=t.alternative,n))});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?h:{byId:_({control:e.byId.control},(0,d.keyBy)(t.experiment.alternatives,"id")),allIds:(0,d.map)(t.experiment.alternatives,"id")}}}(e,t))&&void 0!==n?n:e},conversionActions:function(e,t){var n;return void 0===e&&(e=A),null!==(n=function(e,t){var n,r,i,a,o;switch(t.type){case"ADD_CONVERSION_ACTIONS_INTO_GOAL":return S(S({},e),((n={})[t.goalId]=S(S({},e[t.goalId]),(0,d.keyBy)(t.conversionActions,"id")),n));case"REPLACE_CONVERSION_ACTIONS_IN_GOAL":return S(S({},e),((r={})[t.goalId]=S({},(0,d.keyBy)(t.conversionActions,"id")),r));case"UPDATE_CONVERSION_ACTION":var s=e[t.goalId];if(!s)return e;var l=s[t.conversionActionId];return l?S(S({},e),((i={})[t.goalId]=S(S({},s),((a={})[t.conversionActionId]=S(S({},l),{attributes:t.attributes?S(S({},l.attributes),t.attributes):l.attributes,scope:t.scope?t.scope:l.scope}),a)),i)):e;case"REMOVE_CONVERSION_ACTIONS_FROM_GOAL":return S(S({},e),((o={})[t.goalId]=(0,d.omit)(e[t.goalId],t.conversionActionIds),o));case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:t.experiment.goals.reduce((function(e,t){return e[t.id]=(0,d.keyBy)(t.conversionActions,"id"),e}),{})}}(e,t))&&void 0!==n?n:e},data:function(e,t){var n;return void 0===e&&(e=N),null!==(n=function(e,t){switch(t.type){case"UPDATE_EXPERIMENT_DATA":return w(w({},e),t.attributes);case"SET_TESTED_ELEMENT_AS_INVALID":return w(w({},e),{isTestedElementInvalid:!!t.invalid});case"SETUP_EDITOR":return w(w({},e),(0,d.omit)(t.experiment,["alternatives","goals","scope","segments"]))}}(e,t))&&void 0!==n?n:e},goals:function(e,t){var n;return void 0===e&&(e=T),null!==(n=function(e,t){var n;switch(t.type){case"ADD_GOALS":return I(I({},e),(0,d.keyBy)(t.goals,"id"));case"UPDATE_GOAL":var r=e[t.goalId];return r?I(I({},e),((n={})[t.goalId]=I(I({},r),{attributes:I(I({},r.attributes),t.attributes)}),n)):e;case"REMOVE_GOALS":return(0,d.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,d.keyBy)(t.experiment.goals.map((function(e){return(0,d.omit)(e,"conversionActions")})),"id")}}(e,t))&&void 0!==n?n:e},scope:function(e,t){var n;return void 0===e&&(e=O),null!==(n=function(e,t){switch(t.type){case"ADD_SCOPE_RULES":return R(R({},e),(0,d.keyBy)(t.rules,"id"));case"REMOVE_SCOPE_RULES":return(0,d.omit)(e,t.ids);case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?{}:(0,d.keyBy)(t.experiment.scope,"id")}}(e,t))&&void 0!==n?n:e},segmentation:function(e,t){var n;return void 0===e&&(e=C),null!==(n=function(e,t){var n,r,i,a,o,s;switch(t.type){case"ADD_SEGMENTS":return D(D({},e),{segments:D(D({},e.segments),(0,d.keyBy)(t.segments,"id"))});case"UPDATE_SEGMENT":var l=e.segments[t.segmentId];return l?D(D({},e),{segments:D(D({},e.segments),(n={},n[t.segmentId]=D(D({},l),{attributes:D(D({},l.attributes),t.attributes)}),n))}):e;case"REMOVE_SEGMENTS":return D(D({},e),{segments:(0,d.omit)(e.segments,t.ids)});case"ADD_SEGMENTATION_RULES_INTO_SEGMENT":return D(D({},e),{rules:D(D({},e.rules),(r={},r[t.segmentId]=D(D({},e.rules[t.segmentId]),(0,d.keyBy)(t.segmentationRules,"id")),r))});case"REPLACE_SEGMENTATION_RULES_IN_SEGMENT":return D(D({},e),{rules:D(D({},e.rules),(i={},i[t.segmentId]=D({},(0,d.keyBy)(t.segmentationRules,"id")),i))});case"UPDATE_SEGMENTATION_RULE":var c=e.rules[t.segmentId];if(!c)return e;var u=c[t.segmentationRuleId];return u?D(D({},e),{rules:D(D({},e.rules),(a={},a[t.segmentId]=D(D({},c),(o={},o[t.segmentationRuleId]=D(D({},u),{attributes:D(D({},u.attributes),t.attributes)}),o)),a))}):e;case"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT":return D(D({},e),{rules:D(D({},e.rules),(s={},s[t.segmentId]=(0,d.omit)(e.rules[t.segmentId],t.segmentationRuleIds),s))});case"SET_SEGMENT_EVALUATION":return D(D({},e),{evaluation:t.strategy});case"SETUP_EDITOR":return"nab/heatmap"===t.experiment.type?e:{evaluation:t.experiment.segmentEvaluation,rules:t.experiment.segments.reduce((function(e,t){return e[t.id]=(0,d.keyBy)(t.segmentationRules,"id"),e}),{}),segments:(0,d.keyBy)(t.experiment.segments.map((function(e){return(0,d.omit)(e,"segmentationRules")})),"id")}}}(e,t))&&void 0!==n?n:e}})});var P={};function G(e){return[e]}function B(e,t,n){var r;if(e.length!==t.length)return!1;for(r=n;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function L(e,t){var n,r=t||G;function i(){n=new WeakMap}function a(){var t,i,a,o,s,l=arguments.length;for(o=new Array(l),a=0;a<l;a++)o[a]=arguments[a];for(t=function(e){var t,r,i,a,o,s=n,l=!0;for(t=0;t<e.length;t++){if(!(o=r=e[t])||"object"!=typeof o){l=!1;break}s.has(r)?s=s.get(r):(i=new WeakMap,s.set(r,i),s=i)}return s.has(P)||((a=function(){var e={clear:function(){e.head=null}};return e}()).isUniqueByDependants=l,s.set(P,a)),s.get(P)}(s=r.apply(null,o)),t.isUniqueByDependants||(t.lastDependants&&!B(s,t.lastDependants,0)&&t.clear(),t.lastDependants=s),i=t.head;i;){if(B(i.args,o,1))return i!==t.head&&(i.prev.next=i.next,i.next&&(i.next.prev=i.prev),i.next=t.head,i.prev=null,t.head.prev=i,t.head=i),i.val;i=i.next}return i={val:e.apply(null,o)},o[0]=null,i.args=o,t.head&&(t.head.prev=i,i.next=t.head),t.head=i,i.val}return a.getDependants=r,a.clear=i,i(),a}var M=function(e,t){return e.experiment.alternatives.byId[t]},V=L((function(e){return(0,d.values)(e.experiment.alternatives.byId).filter(b.isDefined)}),(function(e){return[e.experiment.alternatives.byId]})),U=function(e){return e.experiment.alternatives.allIds},j=L((function(e,t){return(0,d.values)(e.experiment.conversionActions[t])}),(function(e,t){return[e.experiment.conversionActions,t]}));function F(e){return!!e.editor.isExperimentBeingSaved}function q(e){return!!e.editor.hasExperimentBeenRecentlySaved}function H(e){return e.experiment.goals[e.editor.activeGoalId]||(0,d.values)(e.experiment.goals)[0]}function W(e){return(0,d.map)(e.experiment.goals,"id").indexOf(e.editor.activeGoalId)||0}function Y(e){return(0,d.filter)(e.experiment.segmentation.segments,{id:e.editor.activeSegmentId})[0]}function X(e){return(0,d.map)(e.experiment.segmentation.segments,"id").indexOf(e.editor.activeSegmentId)||0}function z(e){if(e.experiment&&e.experiment.data&&["draft","paused_draft"].includes(e.experiment.data.status))return e.editor.draftStatusRationale}function J(e){return e.editor.alternativePreviewerUrl}function Q(e){return e.experiment.data.id}function $(e){return e.experiment.data.type}var K=function(e,t){return e.experiment.data[t]},Z=function(e,t){return e.experiment.data[t]};function ee(e){return!!e.experiment.data.isTestedElementInvalid}var te=L((function(e){return(0,d.values)(e.experiment.goals).filter(b.isDefined)}),(function(e){return[e.experiment.goals]})),ne=L((function(e){return(0,d.values)(e.experiment.scope).filter(b.isDefined)}),(function(e){return[e.experiment.scope]})),re=L((function(e){return(0,d.values)(e.experiment.segmentation.segments).filter(b.isDefined)}),(function(e){return[e.experiment.segmentation.segments]})),ie=L((function(e,t){return(0,d.values)(e.experiment.segmentation.rules[t])}),(function(e,t){return[e.experiment.segmentation.rules,t]}));function ae(e){return e.experiment.segmentation.evaluation}function oe(e){return{type:"ADD_ALTERNATIVES",alternatives:(0,d.castArray)(e)}}function se(e){return{type:"REMOVE_ALTERNATIVES",ids:(0,d.castArray)(e)}}function le(e,t){return{type:"REPLACE_ALTERNATIVES",oldIds:(0,d.castArray)(e),alternatives:(0,d.castArray)(t)}}function ce(e,t){return{type:"SET_ALTERNATIVE",id:e,alternative:t}}function ue(e,t){return{type:"ADD_CONVERSION_ACTIONS_INTO_GOAL",goalId:e,conversionActions:(0,d.castArray)(t)}}function me(e,t){return{type:"REPLACE_CONVERSION_ACTIONS_IN_GOAL",goalId:e,conversionActions:(0,d.castArray)(t)}}function de(e,t){return{type:"REMOVE_CONVERSION_ACTIONS_FROM_GOAL",goalId:e,conversionActionIds:(0,d.castArray)(t)}}function pe(e,t,n,r){return{type:"UPDATE_CONVERSION_ACTION",goalId:e,conversionActionId:t,attributes:n,scope:r}}function ve(e){return{type:"SETUP_EDITOR",experiment:e}}function ge(e){return{type:"SET_ACTIVE_GOAL",goalId:e}}function fe(e){return{type:"SET_ACTIVE_SEGMENT",segmentId:e}}function be(e){return{type:"SET_EXPERIMENT_AS_BEING_SAVED",status:e}}function Ee(e){return{type:"SET_DRAFT_STATUS_RATIONALE",rationale:e}}function xe(){return{type:"SET_EXPERIMENT_AS_RECENTLY_SAVED"}}function _e(e){return{type:"OPEN_ALTERNATIVE_PREVIEWER",url:e}}function ye(){return{type:"CLOSE_ALTERNATIVE_PREVIEWER"}}function he(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function Se(e){return{type:"UPDATE_EXPERIMENT_DATA",attributes:e}}function Ae(e){return{type:"SET_TESTED_ELEMENT_AS_INVALID",invalid:e}}function we(e){return{type:"ADD_GOALS",goals:(0,d.castArray)(e)}}function Ne(e){return{type:"REMOVE_GOALS",ids:(0,d.castArray)(e)}}function Ie(e,t){return{type:"UPDATE_GOAL",goalId:e,attributes:t}}function Te(e){return{type:"ADD_SCOPE_RULES",rules:(0,d.castArray)(e)}}function Re(e){return{type:"REMOVE_SCOPE_RULES",ids:(0,d.castArray)(e)}}function Oe(e){return{type:"ADD_SEGMENTS",segments:(0,d.castArray)(e)}}function De(e){return{type:"REMOVE_SEGMENTS",ids:(0,d.castArray)(e)}}function Ce(e,t){return{type:"UPDATE_SEGMENT",segmentId:e,attributes:t}}function ke(e,t){return{type:"ADD_SEGMENTATION_RULES_INTO_SEGMENT",segmentId:e,segmentationRules:(0,d.castArray)(t)}}function Pe(e,t){return{type:"REPLACE_SEGMENTATION_RULES_IN_SEGMENT",segmentId:e,segmentationRules:(0,d.castArray)(t)}}function Ge(e,t){return{type:"REMOVE_SEGMENTATION_RULES_FROM_SEGMENT",segmentId:e,segmentationRuleIds:(0,d.castArray)(t)}}function Be(e,t,n){return{type:"UPDATE_SEGMENTATION_RULE",segmentId:e,segmentationRuleId:t,attributes:n}}function Le(e){return{type:"SET_SEGMENT_EVALUATION",strategy:e}}const Me=window.wp.apiFetch;var Ve=n.n(Me);const Ue=window.wp.date,je=window.wp.url;var Fe=function(){return Fe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Fe.apply(this,arguments)};const qe=function(e){var t=e.url,n=e.path,r=(0,Ue.format)("YmjHi").substring(0,11)+"0";return Ve()(Fe(Fe(Fe({},e),t&&{url:He(e)?(0,je.addQueryArgs)(t,{nabts:r}):t}),n&&{path:(0,je.addQueryArgs)(n,{nabts:r})}))};var He=function(e){var t,n;return!!(null===(t=e.url)||void 0===t?void 0:t.includes("/wp-json/"))||!!(null===(n=e.url)||void 0===n?void 0:n.includes("rest_route"))||!!Object.keys(e).includes("rest_route")};const We=window.wp.i18n,Ye=window.wp.notices;var Xe=function(){return Xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xe.apply(this,arguments)},ze=function(e,t,n,r){return new(n||(n=Promise))((function(i,a){function o(e){try{l(r.next(e))}catch(e){a(e)}}function s(e){try{l(r.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}l((r=r.apply(e,t||[])).next())}))},Je=function(e,t){var n,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},o=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return o.next=s(0),o.throw=s(1),o.return=s(2),"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(i=2&s[0]?r.return:s[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,s[1])).done)return i;switch(r=0,i&&(s=[2&s[0],i.value]),s[0]){case 0:case 1:i=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!i||s[1]>i[0]&&s[1]<i[3])){a.label=s[1];break}if(6===s[0]&&a.label<i[1]){a.label=i[1],i=s;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(s);break}i[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=i=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}},Qe=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};function $e(){return ze(this,void 0,Promise,(function(){var e,t,n,r,i,a,o,s,c,u,m,d,p,v,g,f,b,E,x,_,y,h,S,A,w,N,I,T,R,O,D;return Je(this,(function(C){switch(C.label){case 0:return(0,l.select)(ct).isExperimentBeingSaved()?[2]:[4,(0,l.dispatch)(ct).setExperimentAsBeingSaved(!0)];case 1:for(C.sent(),e=[],t=(0,l.select)(ct).getGoals(),n=0,r=t;n<r.length;n++)i=r[n],a=(0,l.select)(ct).getConversionActions(i.id),o=it(a),e.push(Xe(Xe({},i),{attributes:Xe(Xe({},i.attributes),{useOrderRevenue:o?null===(N=i.attributes.useOrderRevenue)||void 0===N||N:void 0,orderStatusForConversion:o?at(o,i):void 0}),conversionActions:a}));for(s=[],c=(0,l.select)(ct).getSegments(),u=0,m=c;u<m.length;u++)d=m[u],s.push(Xe(Xe({},d),{segmentationRules:(0,l.select)(ct).getSegmentationRules(d.id)}));for(p=[],v=(0,l.select)(ct).getAlternativeIds(),g=(0,l.select)(ct).isTestedElementInvalid(),f=(0,l.select)(ct).getAlternative("control"),b=0,E=v;b<E.length;b++)"control"!==(x=E[b])&&(_=(0,l.select)(ct).getAlternative(x))&&p.push(_);h=(0,l.select)(ct).getExperimentType(),y="nab/heatmap"===h?{id:(0,l.select)(ct).getExperimentId(),type:h,name:(0,l.select)(ct).getExperimentAttribute("name"),description:(0,l.select)(ct).getExperimentAttribute("description"),status:(0,l.select)(ct).getExperimentAttribute("status"),startDate:(0,l.select)(ct).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,l.select)(ct).getExperimentAttribute("endMode"),endValue:(0,l.select)(ct).getExperimentAttribute("endValue"),trackingMode:null!==(I=(0,l.select)(ct).getHeatmapAttribute("trackingMode"))&&void 0!==I?I:"post",trackedPostId:null!==(T=(0,l.select)(ct).getHeatmapAttribute("trackedPostId"))&&void 0!==T?T:0,trackedPostType:null!==(R=(0,l.select)(ct).getHeatmapAttribute("trackedPostType"))&&void 0!==R?R:"page",trackedUrl:null!==(O=(0,l.select)(ct).getHeatmapAttribute("trackedUrl"))&&void 0!==O?O:"",participationConditions:null!==(D=(0,l.select)(ct).getHeatmapAttribute("participationConditions"))&&void 0!==D?D:[]}:{id:(0,l.select)(ct).getExperimentId(),type:h,name:(0,l.select)(ct).getExperimentAttribute("name"),description:(0,l.select)(ct).getExperimentAttribute("description"),status:(0,l.select)(ct).getExperimentAttribute("status"),startDate:(0,l.select)(ct).getExperimentAttribute("startDate"),endDate:!1,endMode:(0,l.select)(ct).getExperimentAttribute("endMode"),endValue:(0,l.select)(ct).getExperimentAttribute("endValue"),scope:(0,l.select)(ct).getScope(),alternatives:g?[f]:Qe([f],p,!0),goals:e,segmentEvaluation:(0,l.select)(ct).getSegmentEvaluation(),segments:s},C.label=2;case 2:return C.trys.push([2,7,,10]),[4,qe({path:"/nab/v1/experiment/".concat(y.id),method:"PUT",data:y})];case 3:return S=C.sent(),"nab/heatmap"!==y.type&&g&&(S=Xe(Xe({},S),{alternatives:Qe([S.alternatives[0]],p,!0)})),[4,(0,l.dispatch)(ct).setupEditor(S)];case 4:return C.sent(),[4,(0,l.dispatch)(ct).setExperimentAsBeingSaved(!1)];case 5:return C.sent(),[4,(0,l.dispatch)(ct).setExperimentAsRecentlySaved()];case 6:return C.sent(),[3,10];case 7:return A=C.sent(),w=ot(A),[4,(0,l.dispatch)(Ye.store).createErrorNotice(w)];case 8:return C.sent(),[4,(0,l.dispatch)(ct).setExperimentAsBeingSaved(!1)];case 9:return C.sent(),[3,10];case 10:return[2]}}))}))}function Ke(e){return ze(this,void 0,Promise,(function(){var t;return Je(this,(function(n){switch(n.label){case 0:return[4,$e()];case 1:return n.sent(),(0,l.select)(ct).hasExperimentBeenRecentlySaved()&&(0,l.select)(ct).getAlternativeIds().includes(e)&&(t=(0,l.select)(ct).getAlternative(e))&&t.links.edit?(window.location.href=t.links.edit,[2]):[2]}}))}))}function Ze(e){return ze(this,void 0,Promise,(function(){var t;return Je(this,(function(n){switch(n.label){case 0:return[4,$e()];case 1:return n.sent(),(0,l.select)(ct).hasExperimentBeenRecentlySaved()&&(0,l.select)(ct).getAlternativeIds().includes(e)&&(null==(t=(0,l.select)(ct).getAlternative(e))?void 0:t.links.preview)?[4,(0,l.dispatch)(ct).openAlternativePreviewer(t.links.preview)]:[2];case 2:return n.sent(),[2]}}))}))}function et(){return ze(this,void 0,Promise,(function(){return Je(this,(function(e){switch(e.label){case 0:return[4,(0,l.dispatch)(ct).setExperimentData({status:"trash"})];case 1:return e.sent(),[4,$e()];case 2:return e.sent(),window.location.href=(0,l.select)(v.store).getAdminUrl("edit.php",{post_type:"nab_experiment"}),[2]}}))}))}function tt(){return ze(this,void 0,Promise,(function(){return Je(this,(function(e){switch(e.label){case 0:return[4,rt("start",(0,We._x)("Test can’t be started","text","nelio-ab-testing"))];case 1:return e.sent(),[2]}}))}))}function nt(){return ze(this,void 0,Promise,(function(){return Je(this,(function(e){switch(e.label){case 0:return[4,rt("resume",(0,We._x)("Test can’t be resumed","text","nelio-ab-testing"))];case 1:return e.sent(),[2]}}))}))}function rt(e,t){return ze(this,void 0,Promise,(function(){var n,r,i;return Je(this,(function(a){switch(a.label){case 0:return[4,$e()];case 1:return a.sent(),(0,l.select)(ct).hasExperimentBeenRecentlySaved()?[4,(0,l.dispatch)(ct).setExperimentAsBeingSaved(!0)]:[2];case 2:a.sent(),n=(0,l.select)(ct).getExperimentId(),a.label=3;case 3:return a.trys.push([3,5,,8]),[4,qe({path:"/nab/v1/experiment/".concat(n,"/").concat(e),method:"PUT"})];case 4:return a.sent(),[3,8];case 5:return r=a.sent(),i=ot(r,t),[4,(0,l.dispatch)(Ye.store).createErrorNotice(i)];case 6:return a.sent(),[4,(0,l.dispatch)(ct).setExperimentAsBeingSaved(!1)];case 7:return a.sent(),[2];case 8:return window.location.href=(0,l.select)(v.store).getAdminUrl("admin.php",{page:"nelio-ab-testing-experiment-view",experiment:n}),[2]}}))}))}function it(e){if(e.length)return e.every((function(e){return"nab/wc-order"===e.type}))?"woocommerce":e.every((function(e){return"nab/edd-order"===e.type}))?"edd":void 0}function at(e,t){var n=(0,l.select)(v.store).getECommerceSetting(e,"orderStatuses"),r=t.attributes.orderStatusForConversion;return r&&n.map((function(e){return e.value})).includes(r)?r:function(e){switch(e){case"woocommerce":return"wc-completed";case"edd":return"complete"}}(e)}function ot(e,t){var n=t||(0,We._x)("Unknown error","text","nelio-ab-testing");if(!e||"object"!=typeof e)return n;if("errors"in e&&"object"==typeof e.errors){var r=Array.isArray(e.errors)?e.errors:(0,d.values)(e.errors);if("string"==typeof r[0])return r[0]||n;var i=Array.isArray(r[0])&&"string"==typeof r[0][0]?r[0][0]:void 0;if(i)return i||n}return"message"in e&&"string"==typeof e.message&&e.message||n}var st=function(){return st=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},st.apply(this,arguments)},lt=st(st({},i),a),ct=(0,l.createReduxStore)("nab/editor",{reducer:k,controls:l.controls,actions:lt,selectors:r});!function(e){(0,l.register)(e)}(ct);var ut=function(e){var t=e.experiment,n=e.children,r=(0,s.useState)(!1),i=r[0],a=r[1],o=(0,l.useDispatch)(ct),c=o.setupEditor,u=o.setActiveGoal,m=o.setActiveSegment;return(0,s.useEffect)((function(){if(t){var e=t.goals[0]||(0,b.createGoal)(),n=t.segments[0];c(t),u(e.id),n&&m(n.id),a(!0)}}),[!!t]),i?s.createElement("div",null,n):null};const mt=window.wp.components,dt=window.nab.conversionActions,pt=window.nab.date,vt=window.nab.segmentationRules;function gt(e,t,n){var r;if(!e.conversionActions.length)return(0,We.sprintf)(/* translators: goal name */ /* translators: goal name */
(0,We._x)("%s doesn’t have any conversion actions","text","nelio-ab-testing"),ft(e,t));for(var i=0;i<e.conversionActions.length;++i){var a=e.conversionActions[i];if(a){var o=n[a.type];if(!o)return(0,We.sprintf)(/* translators: goal name */ /* translators: goal name */
(0,We._x)("%s has one or more invalid conversion actions","text","nelio-ab-testing"),ft(e,t));if(!(0,b.isEmpty)(null===(r=o.validate)||void 0===r?void 0:r.call(o,a.attributes))||!(0,b.isEmpty)((0,b.getConversionActionScopeError)(a.scope)))return(0,We.sprintf)(/* translators: goal name, as in “Goal 2” or “Default Goal” */ /* translators: goal name, as in “Goal 2” or “Default Goal” */
(0,We._x)("One or more conversion actions in %s are invalid","text","nelio-ab-testing"),ft(e,t))}}return!1}function ft(e,t){var n=(0,We.sprintf)(/* translators: goal id */ /* translators: goal id */
(0,We._x)("Goal %d","text","nelio-ab-testing"),t+1);return 0===t&&(n=(0,We._x)("Default Goal","text","nelio-ab-testing")),(0,d.trim)(e.attributes.name)&&(n=(0,We.sprintf)(/* translators: goal name */ /* translators: goal name */
(0,We._x)("Goal “%s”","text","nelio-ab-testing"),(0,d.trim)(e.attributes.name))),n}function bt(e,t,n){var r;if(!e.segmentationRules.length)return(0,We.sprintf)(/* translators: segment name */ /* translators: segment name */
(0,We._x)("%s doesn’t have any segmentation rules","text","nelio-ab-testing"),Et(e,t));for(var i=0;i<e.segmentationRules.length;++i){var a=e.segmentationRules[i];if(a){var o=n[a.type];if(!o)return(0,We.sprintf)(/* translators: segment name */ /* translators: segment name */
(0,We._x)("%s has one or more invalid segmentation rules","text","nelio-ab-testing"),Et(e,t));if(!(0,b.isEmpty)(null===(r=o.validate)||void 0===r?void 0:r.call(o,a.attributes)))return(0,We.sprintf)(/* translators: segment name, as in Segment 2” */ /* translators: segment name, as in Segment 2” */
(0,We._x)("One or more segmentation rules in %s are invalid","text","nelio-ab-testing"),Et(e,t))}}return!1}function Et(e,t){var n=(0,We.sprintf)(/* translators: segment id */ /* translators: segment id */
(0,We._x)("Segment %d","text","nelio-ab-testing"),t+1);return(0,d.trim)(e.attributes.name)&&(n=(0,We.sprintf)(/* translators: segment name */ /* translators: segment name */
(0,We._x)("Segment “%s”","text","nelio-ab-testing"),(0,d.trim)(e.attributes.name))),n}const xt=window.nab.experiments;function _t(e){var t=c((function(t){return t(ct).getExperimentAttribute(e)})),n=(0,l.useDispatch)(ct).setExperimentData;return[t,function(t){var r;n(((r={})[e]=t,r))}]}function yt(){var e=_t("type")[0];return c((function(t){return t(xt.store).getExperimentType(e)}))}var ht=function(e){return c((function(t){return t(v.store).isSubscribedTo(e)}))},St=function(){var e=wt(),t=Math.min(8,(0,v.usePluginSetting)("maxCombinations")),n=c((function(e){return e(ct).getAlternativeIds().length}));return!At()&&!!e&&n<t},At=function(){return _t("status")[0].includes("paused")},wt=function(){return c((function(e){return e(v.store).getPluginSetting("subscription")}))},Nt=function(){return Nt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Nt.apply(this,arguments)},It=function(){return Tt(),Rt(),null},Tt=function(){var e=Ot(),t=_t("startDate")[0]||"",n=_t("status"),r=n[0],i=n[1],a=(0,l.useDispatch)(ct).setDraftStatusRationale,o=function(e,t){r.includes("paused")&&(e="draft"===e?"paused_draft":"paused"),i(e),a(null!=t?t:"")};(0,s.useEffect)((function(){"running"!==r&&"trash"!==r&&(e?o("draft",e):"ready"!==r&&("scheduled"!==r||(0,pt.isInTheFuture)(t)||o("ready"),"scheduled"!==r&&o("ready")))}),[e,t,r])},Rt=function(){var e=_t("status")[0],t=Dt(),n=yt(),r=(0,d.find)(t,{id:"control"}),i=c((function(e){return e(ct).isTestedElementInvalid()})),a=(0,l.useDispatch)(ct).setTestedElementAsInvalid;(0,s.useEffect)((function(){if("running"!==e){var t=!!r&&!!n&&!!n.checks.getControlError(r.attributes,l.select);(0,d.isEqual)(i,t)||a(t)}}),[r,l.select,n,i])},Ot=function(){var e=(0,s.useState)(""),t=e[0],n=e[1],r=_t("name")[0]||"",i=yt(),a=Dt(),o=Ct(),c=kt(),u=Pt(),m=Gt();return(0,s.useEffect)((function(){if(i){var e=(0,d.find)(a,{id:"control"}),t=function(e,t,n){var r=e.control,i=e.alternatives,a=e.goals,o=e.segments,s=e.name,c=e.type;if(!s)return(0,We._x)("Test is unnamed","text","nelio-ab-testing");if(i.length<2)return(0,We._x)("Test doesn’t have any variants","text","nelio-ab-testing");var u=c.checks.getControlError(r.attributes,l.select);if(u)return u;var m=i.slice(1).reduce((function(e,t,n){return e||c.checks.getAlternativeError(t.attributes,(0,b.getLetter)(n+1),r.attributes,l.select)}),!1);if(m)return m;var d=function(e,t){if(!e.length)return(0,We._x)("Test doesn’t have any goals","text","nelio-ab-testing");for(var n=0;n<e.length;++n){var r=e[n];if(r){var i=gt(r,n,t);if(i)return i}}return!1}(a,t);if(d)return d;var p=function(e,t){for(var n=0;n<e.length;++n){var r=e[n];if(r){var i=bt(r,n,t);if(i)return i}}return!1}(o,n);return p||!1}({name:r,control:e,alternatives:a,goals:o,segments:c,type:i},u,m);n(t||"")}else n((0,We._x)("Type not found","text","nelio-ab-testing"))}),[r,i,JSON.stringify(a),JSON.stringify(o),JSON.stringify(c)]),t},Dt=function(){return c((function(e){return e(ct).getAlternatives()}))},Ct=function(){return c((function(e){var t=e(ct),n=t.getGoals,r=t.getConversionActions;return(0,d.map)(n(),(function(e){return Nt(Nt({},e),{conversionActions:r(e.id)})}))}))},kt=function(){return c((function(e){var t=e(ct),n=t.getSegments,r=t.getSegmentationRules;return(0,d.map)(n(),(function(e){return Nt(Nt({},e),{segmentationRules:r(e.id)})}))}))},Pt=function(){return c((function(e){return(0,d.keyBy)(e(dt.store).getConversionActionTypes()||[],"name")}))},Gt=function(){return c((function(e){return(0,d.keyBy)(e(vt.store).getSegmentationRuleTypes()||[],"name")}))};const Bt=window.nab.components;var Lt=function(){var e=(0,s.useRef)(null),t=Ut(),n=Vt(),r=jt(),i=_t("status")[0],a=(i||"").includes("draft"),o=(i||"").includes("paused"),c=Ft(),u=qt(),m=Ht(),d=(0,l.useDispatch)(ct),p=d.saveExperiment,v=d.setExperimentData,g=Mt();return s.createElement("div",{ref:e,className:"nab-edit-experiment-header"},s.createElement("div",{className:"nab-edit-experiment-header__info"},t&&s.createElement(t,{className:"nab-edit-experiment-header__experiment-icon"}),s.createElement("h1",{className:"nab-edit-experiment-header__title"},(0,We._x)("Edit Test","text","nelio-ab-testing")),s.createElement(Bt.SubscribeWithCouponButton,{className:"finished"===i?"nab-edit-experiment-header__right-promo-button":void 0})),s.createElement("div",{className:"nab-edit-experiment-header__settings"},c&&s.createElement("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--is-saving"},s.createElement(mt.Dashicon,{icon:"cloud"}),(0,We._x)("Saving…","text","nelio-ab-testing")),u&&"scheduled"!==i&&s.createElement("span",{className:"nab-edit-experiment-header__save-button nab-edit-experiment-header__save-button--has-been-saved"},s.createElement(mt.Dashicon,{icon:"yes"}),(0,We._x)("Saved","text (experiment)","nelio-ab-testing")),!c&&!(u&&"scheduled"!==i)&&s.createElement(mt.Button,{variant:"tertiary",className:"nab-edit-experiment-header__save-button",onClick:"scheduled"===i?function(){v({status:o?"paused":"ready"}),p()}:p},"scheduled"===i?(0,We._x)("Save as Ready","command (experiment)","nelio-ab-testing"):(0,We._x)("Save","command","nelio-ab-testing")),s.createElement("div",{className:"nab-edit-experiment-header__start-button"},s.createElement(Bt.Tooltip,{text:r,placement:"left",getTooltipContainer:e.current?function(){return e.current}:void 0},s.createElement("span",null,s.createElement(mt.Button,{variant:"primary",disabled:a||c||!g||u&&"scheduled"===i,onClick:m},n))))))},Mt=function(){var e=(_t("status")[0]||"").includes("paused");return c((function(t){return(0,t(v.store).hasCapability)(e?"resume_nab_experiments":"start_nab_experiments")}))},Vt=function(){var e=_t("startDate")[0],t=_t("status")[0];return(t||"").includes("paused")?(0,We._x)("Resume…","command","nelio-ab-testing"):e&&(0,pt.isInTheFuture)(e)?"scheduled"===t?(0,We._x)("Schedule","command","nelio-ab-testing"):(0,We._x)("Schedule…","command","nelio-ab-testing"):(0,We._x)("Start…","command","nelio-ab-testing")},Ut=function(){return c((function(e){var t,n=e(xt.store).getExperimentTypes,r=e(ct).getExperimentType;return null===(t=n()[r()])||void 0===t?void 0:t.icon}))},jt=function(){return c((function(e){return e(ct).getDraftStatusRationale()}))},Ft=function(){return c((function(e){return e(ct).isExperimentBeingSaved()}))},qt=function(){return c((function(e){return e(ct).hasExperimentBeenRecentlySaved()}))},Ht=function(){var e=_t("status")[0],t=_t("startDate")[0],n=(e||"").includes("paused"),r=(0,l.useDispatch)(ct),i=r.resumeExperiment,a=r.setExperimentData,o=r.saveExperiment,s=r.startExperiment;return function(){n?i():t&&(0,pt.isInTheFuture)(t)?(a({status:"scheduled"}),o()):s()}};const Wt=window.wp.blockEditor;var Yt=function(){var e=_t("name"),t=e[0],n=e[1];return s.createElement("div",{className:"nab-experiment-title"},s.createElement(Wt.PlainText,{value:t,className:"nab-experiment-title__edit",placeholder:(0,We._x)("Name your test…","user","nelio-ab-testing"),onChange:n}))},Xt=function(){return Xt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Xt.apply(this,arguments)},zt=function(e){var t,n=e.readOnly,r=e.action,i=e.goalId,a=Jt(),o=Qt(),l=$t(),c=Kt(r.type),u=null==c?void 0:c.view,m=null==c?void 0:c.edit,d=null==c?void 0:c.icon,p=(null==r?void 0:r.attributes)||{},v=(null==r?void 0:r.scope)||{type:"test-scope"},g=null!==(t=null==c?void 0:c.validate)&&void 0!==t?t:function(){return{}},f=Xt(Xt({},g(p)),{_scope:(0,b.getConversionActionScopeError)(v)}),E=(0,s.useState)(!(0,b.isEmpty)(f))[0],x=Zt(i,r.id),_=x.setAttributes,y=x.setScope,h=en(i,r.id);return o?n?s.createElement("div",{className:"nab-conversion-action"},s.createElement("div",{className:"nab-conversion-action__view"},d?s.createElement(d,{className:"nab-conversion-action__icon"}):s.createElement(mt.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-conversion-action__actual-view"},u?s.createElement(u,{attributes:p,scope:v,experimentId:a,goal:o.attributes,goalId:i,goalIndex:l}):s.createElement("span",null,(0,We._x)("Invalid conversion action.","text","nelio-ab-testing"))))):s.createElement(mt.PanelBody,{className:"nab-conversion-action",initialOpen:E,title:s.createElement("div",{className:"nab-conversion-action__view"},d?s.createElement(d,{className:"nab-conversion-action__icon"}):s.createElement(mt.Dashicon,{className:"nab-conversion-action__icon nab-conversion-action__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-conversion-action__actual-view"},u?s.createElement(u,{attributes:p,scope:v,experimentId:a,goal:o.attributes,goalId:i,goalIndex:l}):s.createElement("span",null,(0,We._x)("Invalid conversion action.","text","nelio-ab-testing"))))},s.createElement("div",{className:"nab-conversion-action__edit"},m?s.createElement(m,{attributes:p,scope:v,experimentId:a,goal:o.attributes,goalId:i,goalIndex:l,setAttributes:_,setScope:y,errors:f}):s.createElement("span",null,(0,We._x)("This conversion action can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),s.createElement(mt.Button,{variant:"link",isDestructive:!0,onClick:h,className:"nab-conversion-action__delete-button"},(0,We._x)("Delete","command","neli-ab-testing"))):null},Jt=function(){return c((function(e){return e(ct).getExperimentId()}))},Qt=function(){return c((function(e){return e(ct).getActiveGoal()}))},$t=function(){return c((function(e){return e(ct).getActiveGoalIndex()}))},Kt=function(e){return c((function(t){return t(dt.store).getConversionActionType(e)}))},Zt=function(e,t){var n=(0,l.useDispatch)(ct).updateConversionAction,r=function(r,i){return n(e,t,r,i)},i=(0,s.useCallback)((function(e){return r(e,void 0)}),[e,t]),a=(0,s.useCallback)((function(e){return r(void 0,e)}),[e,t]);return{setAttributes:e&&t?i:d.noop,setScope:e&&t?a:d.noop}},en=function(e,t){var n=(0,l.useDispatch)(ct).removeConversionActionsFromGoal;return e&&t?function(){return n(e,t)}:d.noop},tn=function(){var e=nn(),t=rn(e);return s.createElement("div",{className:"nab-conversion-action-list nab-conversion-action-list--automatic"},1===t.length?s.createElement("p",{key:"conversion-action-explanation",className:"nab-conversion-action-list__help"},(0,We._x)("By default, there will be a new conversion in this test when the following conversion action occurs after the visitor has seen the tested element:","text","nelio-ab-testing")):s.createElement("p",{key:"conversion-action-explanation",className:"nab-conversion-action-list__help"},(0,We._x)("Split tests are usually run with some specific goals in mind. In this type of test, there’s a new conversion when at least one of the following conversion actions occurs after the visitor has seen the tested element:","text","nelio-ab-testing")),e&&t.map((function(t){return s.createElement(zt,{key:t.id,goalId:e,action:t,readOnly:!0})})))},nn=function(){return c((function(e){var t;return null===(t=e(ct).getActiveGoal())||void 0===t?void 0:t.id}))},rn=function(e){return c((function(t){return e&&(0,t(ct).getConversionActions)(e)||[]}))},an=function(){var e=on(),t=sn(e);return s.createElement("div",{className:"nab-conversion-action-list"},!!t.length&&s.createElement("p",{key:"conversion-action-explanation-1"},(0,We._x)("After a visitor has seen the tested element, there’s a new conversion every time one of the following conversion actions occurs:","text","nelio-ab-testing")),e&&t.map((function(t){return s.createElement(zt,{key:t.id,goalId:e,action:t})})),!t.length&&[s.createElement("p",{key:"conversion-action-explanation-1",className:"nab-conversion-action-list__help"},(0,We._x)("Split tests are usually run with some specific goals in mind, such as “getting more subscribers” or “showing interest in your products.” Goals are fulfilled when the visitor performs certain actions. For instance, a visitor might be “showing interest in your products” when they visit your pricing page or they submit a certain form in your website.","text","nelio-ab-testing")),s.createElement("p",{key:"conversion-action-explanation-2",className:"nab-conversion-action-list__help"},(0,s.createInterpolateElement)((0,We._x)("Use the buttons below to <strong>add the specific conversion actions</strong> that fulfill this goal.","user","nelio-ab-testing"),{strong:s.createElement("strong",null)}))])},on=function(){return c((function(e){var t;return null===(t=e(ct).getActiveGoal())||void 0===t?void 0:t.id}))},sn=function(e){return c((function(t){return e&&(0,t(ct).getConversionActions)(e)||[]}))},ln=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},cn=function(){var e=!!(0,v.usePluginSetting)("subscription"),t=un(),n=!!dn(t).length,r=mn(),i=(0,l.useDispatch)(ct).addConversionActionsIntoGoal;return!e&&n?s.createElement("div",{className:"nab-conversion-action-type-list"},s.createElement(mt.ExternalLink,{className:"components-button is-secondary",href:(0,b.addFreeTracker)((0,We._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,We._x)("Subscribe to Track More Actions","user","nelio-ab-testing"))):s.createElement("ul",{className:"nab-conversion-action-type-list"},r&&r.map((function(e){var n=e.icon;return s.createElement(mt.Tooltip,{key:e.name,text:e.title,placement:"top"},s.createElement("li",{key:e.name,className:"nab-conversion-action-type-list__item"},s.createElement(mt.Button,{variant:"secondary",className:"nab-conversion-action-type-list__new-action-button",onClick:function(){return function(e){if(t){var n=(0,dt.createConversionAction)(e);n&&i(t,n)}}(e.name)}},s.createElement(n,null))))})))},un=function(){return c((function(e){var t;return null===(t=e(ct).getActiveGoal())||void 0===t?void 0:t.id}))},mn=function(){var e=un(),t=dn(e);return c((function(e){var n=e(dt.store).getConversionActionTypes,r=(0,d.filter)(n(),(function(t){return!t.isActive||t.isActive(e)})),i=(0,d.find)(r,{name:"nab/wc-order"});if(i&&t.length&&(0,d.every)(t,{type:"nab/wc-order"}))return[i];var a=(0,d.find)(r,{name:"nab/edd-order"});return a&&t.length&&(0,d.every)(t,{type:"nab/edd-order"})?[a]:(a||i)&&t.length?d.without.apply(void 0,ln([r],ln(ln([],i?[i]:[],!0),a?[a]:[],!0),!1)):r}))},dn=function(e){return c((function(t){return e&&t(ct).getConversionActions(e)||[]}))},pn=function(){var e=fn();return e?s.createElement(vn,{plugin:e}):null},vn=function(e){var t=e.plugin,n=gn(t),r=bn(),i=r[0],a=r[1],o=xn(t),l=En(t),c=l[0],u=l[1];return s.createElement("div",{className:"nab-ecommerce-goal-settings"},s.createElement("p",null,s.createElement("strong",null,n)),s.createElement(mt.SelectControl,{label:(0,We._x)("Order status required for conversions:","command","nelio-ab-testing"),options:o,value:c,onChange:u}),s.createElement(mt.CheckboxControl,{label:(0,We._x)("Track revenue and show in test results","command","nelio-ab-testing"),checked:i,onChange:a}))},gn=function(e){switch(e){case"woocommerce":return(0,We._x)("WooCommerce Goal Settings","text","nelio-ab-testing");case"edd":return(0,We._x)("Easy Digital Downloads Goal Settings","text","nelio-ab-testing")}},fn=function(){return c((function(e){var t,n=e(ct).getActiveGoal,r=e(ct).getConversionActions,i=null===(t=n())||void 0===t?void 0:t.id,a=i?r(i):[];if(a.length)return a.every((function(e){return"nab/wc-order"===e.type}))?"woocommerce":a.every((function(e){return"nab/edd-order"===e.type}))?"edd":void 0}))},bn=function(){var e,t=yn(),n=null===(e=null==t?void 0:t.attributes.useOrderRevenue)||void 0===e||e,r=(0,l.useDispatch)(ct).updateGoal;return[n,function(){return t?r(t.id,{useOrderRevenue:!n}):void 0}]},En=function(e){var t=yn(),n=xn(e),r=null==t?void 0:t.attributes.orderStatusForConversion,i=r&&n.map((function(e){return e.value})).includes(null==t?void 0:t.attributes.orderStatusForConversion)?r:hn(e),a=(0,l.useDispatch)(ct).updateGoal;return[i,function(e){return t?a(t.id,{orderStatusForConversion:e}):void 0}]},xn=function(e){return c((function(t){return t(v.store).getECommerceSetting(e,"orderStatuses")}))},yn=function(){return c((function(e){return e(ct).getActiveGoal()}))},hn=function(e){switch(e){case"woocommerce":return"wc-completed";case"edd":return"complete"}},Sn=function(e){var t=e.name,n=e.setName,r=e.removeGoal,i=e.isAutomatic;return s.createElement("div",{className:"nab-current-goal-info"},!i&&s.createElement("div",{className:"nab-current-goal-info__header"},s.createElement(mt.TextControl,{placeholder:(0,We._x)("Name your goal…","user","nelio-ab-testing"),value:t,onChange:function(e){return n(e)}}),!!r&&s.createElement(mt.Button,{variant:"tertiary",isDestructive:!0,className:"nab-current-goal-info__delete-button",onClick:r},(0,We._x)("Delete","command (goal)","nelio-ab-testing"))),s.createElement(pn,null),i?s.createElement(tn,null):s.createElement(s.Fragment,null,s.createElement(an,null),s.createElement(cn,null)))},An=n(6942),wn=n.n(An),Nn=function(){var e=In(),t=Tn(),n=Rn(),r=!!(0,v.usePluginSetting)("subscription"),i=(0,l.useDispatch)(ct),a=i.setActiveGoal,o=i.addGoals;return s.createElement("ul",{className:"nab-goal-list"},t.map((function(t,n){return s.createElement("li",{key:t.id,className:wn()("nab-goal-list__item",{"nab-goal-list__item--is-active":t.id===e})},s.createElement(mt.Button,{disabled:t.id===e,onClick:function(){return a(t.id)}},(0,d.trim)(t.attributes.name)||function(e){return e?(0,We.sprintf)(/* translators: a number */ /* translators: a number */
(0,We._x)("Goal %d","text","nelio-ab-testing"),e+1):(0,We._x)("Default Goal","text","nelio-ab-testing")}(n)))})),!n&&r&&s.createElement("li",{className:"nab-goal-list__add-new-goal",key:"add-new-goal"},s.createElement(mt.Button,{className:"nab-goal-list__add-new-goal-button",variant:"link",onClick:function(){var e=(0,b.createGoal)();o(e),a(e.id)}},s.createElement(mt.Dashicon,{icon:"plus"}),s.createElement("span",null,(0,We._x)("New","command (goal)","nelio-ab-testing")))))},In=function(){return c((function(e){var t;return null===(t=e(ct).getActiveGoal())||void 0===t?void 0:t.id}))},Tn=function(){return c((function(e){return e(ct).getGoals()}))},Rn=function(){return(_t("status")[0]||"").includes("paused")},On=function(){return On=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},On.apply(this,arguments)},Dn=function(){var e;Bn();var t=Cn(),n=kn(),r=Pn(),i=n.length,a=Gn(),o=(0,l.useDispatch)(ct),c=o.removeGoals,u=o.setActiveGoal,m=o.updateGoal,p=1<i&&!r;return s.createElement("div",{className:"nab-edit-experiment__goal-section"},s.createElement("h2",null,(0,s.createInterpolateElement)((0,We.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,We._x)("%s Conversion Goals and Actions","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(mt.Dashicon,{className:"nab-goal-section__title-icon",icon:"flag"})})),s.createElement("div",{className:"nab-edit-experiment-goal-section__content"},s.createElement(Nn,null),s.createElement(Sn,{name:null!==(e=null==t?void 0:t.attributes.name)&&void 0!==e?e:"",setName:function(e){return n={name:e},t&&m(t.id,On(On({},t.attributes),n));var n},removeGoal:p?function(){if(t){var e=function(e,t){var n=(0,d.findIndex)(e,{id:t});return n===e.length-1?e[n-1]:e[n+1]}(n,t.id);e&&(u(e.id),c(t.id))}}:void 0,isAutomatic:a})))},Cn=function(){return c((function(e){return e(ct).getActiveGoal()}))},kn=function(){return c((function(e){return e(ct).getGoals()}))},Pn=function(){return(_t("status")[0]||"").includes("paused")},Gn=function(){var e=Cn(),t=kn();return c((function(n){var r,i=n(ct).getExperimentType,a=n(xt.store).hasExperimentSupport;return(null==e?void 0:e.id)===(null===(r=t[0])||void 0===r?void 0:r.id)&&a(i(),"automaticGoalSetup")}))},Bn=function(){var e,t=(0,l.useDispatch)(ct).replaceConversionActionsInGoal,n=null===(e=kn()[0])||void 0===e?void 0:e.id,r=c((function(e){return e(ct).getAlternative("control")})),i=c((function(e){var t=e(ct).getExperimentType;return(0,e(xt.store).getExperimentSupport)(t(),"automaticGoalSetup")})),a=c((function(e){return e(ct),n?e(ct).getConversionActions(n):[]}));(0,s.useEffect)((function(){if(r&&n&&i){var e=i(r.attributes);(0,d.isEqual)(Ln(a),Ln(e))||t(n,e)}}),[i,n,r])},Ln=function(e){return e.map((function(e){return(0,d.omit)(e,"id")}))},Mn=function(e){var t,n=e.readOnly,r=e.rule,i=e.setAttributes,a=e.remove,o=Vn(),l=Un(r.type),c=null==l?void 0:l.view,u=null==l?void 0:l.edit,m=null==l?void 0:l.icon,d=(null==r?void 0:r.attributes)||{},p=(null!==(t=null==l?void 0:l.validate)&&void 0!==t?t:function(){return{}})(d),v=(0,s.useState)(!(0,b.isEmpty)(p))[0];return n?s.createElement("div",{className:"nab-segmentation-rule"},s.createElement("div",{className:"nab-segmentation-rule__view"},m?s.createElement(m,{className:"nab-segmentation-rule__icon"}):s.createElement(mt.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?s.createElement(c,{attributes:d,experimentId:o}):s.createElement("span",null,(0,We._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))):s.createElement(mt.PanelBody,{className:"nab-segmentation-rule",initialOpen:v,title:s.createElement("div",{className:"nab-segmentation-rule__view"},m?s.createElement(m,{className:"nab-segmentation-rule__icon"}):s.createElement(mt.Dashicon,{className:"nab-segmentation-rule__icon nab-segmentation-rule__icon--invalid",icon:"warning"}),s.createElement("div",{className:"nab-segmentation-rule__actual-view"},c?s.createElement(c,{attributes:d,experimentId:o}):s.createElement("span",null,(0,We._x)("Invalid segmentation rule.","text","nelio-ab-testing"))))},s.createElement("div",{className:"nab-segmentation-rule__edit"},u?s.createElement(u,{attributes:d,experimentId:o,setAttributes:i,errors:p}):s.createElement("span",null,(0,We._x)("This segmentation rule can’t be properly loaded. Please consider removing it.","text","nelio-ab-testing"))),s.createElement(mt.Button,{variant:"link",isDestructive:!0,onClick:a,className:"nab-segmentation-rule__delete-button"},(0,We._x)("Delete","command","neli-ab-testing")))},Vn=function(){return c((function(e){return e(ct).getExperimentId()}))},Un=function(e){return c((function(t){return t(vt.store).getSegmentationRuleType(e)}))},jn=function(){var e=qn(),t=Hn(),n=Wn();return s.createElement("div",{className:"nab-segmentation-rule-list"},!!e.length&&s.createElement("p",{key:"segmentation-rule-explanation-1"},(0,We._x)("A visitor participates in the test every time all of the following segmentation rules match:","text","nelio-ab-testing")),e.map((function(e){return s.createElement(Mn,{key:e.id,rule:e,setAttributes:function(n){return t(e.id,n)},remove:function(){return n(e.id)}})})),!e.length&&[s.createElement("p",{key:"segmentation-rule-explanation-1",className:"nab-segmentation-rule-list__help"},(0,We._x)("Split tests are usually applied to all visitors. But you can narrow your audience using segmentation rules to target only a subset of your visitors.","text","nelio-ab-testing")),s.createElement("p",{key:"segmentation-rule-explanation-2",className:"nab-segmentation-rule-list__help"},(0,s.createInterpolateElement)((0,We._x)("Use the buttons below to <strong>add the specific segmentation rules</strong> for this segment.","user","nelio-ab-testing"),{strong:s.createElement("strong",null)}))])},Fn=function(){return c((function(e){return e(ct).getActiveSegment()}))},qn=function(){var e=Fn();return c((function(t){var n=t(ct).getSegmentationRules;return(null==e?void 0:e.id)&&n(e.id)||[]}))},Hn=function(){var e,t=null===(e=Fn())||void 0===e?void 0:e.id,n=(0,l.useDispatch)(ct).updateSegmentationRule;return function(e,r){return t?n(t,e,r):Yn}},Wn=function(){var e,t=null===(e=Fn())||void 0===e?void 0:e.id,n=(0,l.useDispatch)(ct).removeSegmentationRulesFromSegment;return function(e){return t?n(t,e):Yn}},Yn=function(){},Xn=function(e){var t=e.category,n=e.createSegmentationRule,r=e.segmentationRules,i=zn(t.name),a=t.icon;return i.length?s.createElement("li",{key:t.name,className:"nab-segmentation-rule-type-category"},s.createElement(mt.DropdownMenu,{icon:s.createElement(a,null),className:"nab-segmentation-rule-type-category__item",label:t.title,controls:i.map((function(e){var t=e.name,i=e.title,a=e.icon,o=e.singleton;return{title:i,icon:s.createElement(a,null),isDisabled:o&&r.some((function(e){return e.type===t})),onClick:function(){return n(t)}}})),toggleProps:{className:"nab-segmentation-rule-type-category__toggle",disabled:i.every((function(e){var t=e.name;return e.singleton&&r.some((function(e){return e.type===t}))}))},menuProps:{className:"nab-segmentation-rule-type-category__menu"}})):null},zn=function(e){return c((function(t){return(t(vt.store).getSegmentationRuleTypes()||[]).filter((function(t){return t.category===e}))}))},Jn=function(e){var t=e.createSegmentationRule,n=e.segmentationRules,r=Qn();return(0,v.usePluginSetting)("subscription")?s.createElement("ul",{className:"nab-segmentation-rule-type-category-list"},r.map((function(e){return s.createElement(Xn,{key:e.name,category:e,createSegmentationRule:t,segmentationRules:n})}))):s.createElement("div",{className:"nab-segmentation-rule-type-list"},s.createElement(mt.ExternalLink,{className:"components-button is-secondary",href:(0,b.addFreeTracker)((0,We._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,We._x)("Subscribe to Use Segmentation Rules","user","nelio-ab-testing")))},Qn=function(){return c((function(e){return e(vt.store).getSegmentationRuleTypeCategories()||[]}))},$n=function(e){var t=e.name,n=e.setName,r=e.removeSegment,i=Zn(),a=er();return s.createElement("div",{className:"nab-current-segment-info"},s.createElement("div",{className:"nab-current-segment-info__header"},s.createElement(mt.TextControl,{placeholder:(0,We._x)("Name your segment…","user","nelio-ab-testing"),value:t,onChange:function(e){return n(e)}}),!!r&&s.createElement(mt.Button,{variant:"tertiary",isDestructive:!0,className:"nab-current-segment-info__delete-button",onClick:r},(0,We._x)("Delete","command (segment)","nelio-ab-testing"))),s.createElement(jn,null),s.createElement(Jn,{segmentationRules:i,createSegmentationRule:a}))},Kn=function(){return c((function(e){return e(ct).getActiveSegment()}))},Zn=function(){var e=Kn();return c((function(t){var n=t(ct).getSegmentationRules;return(null==e?void 0:e.id)&&n(e.id)||[]}))},er=function(){var e=(0,l.useDispatch)(ct).addSegmentationRulesIntoSegment,t=Kn();return function(n){if(t){var r=(0,vt.createSegmentationRule)(n);r&&e(t.id,r)}}},tr=function(){var e=nr(),t=rr(),n=ir(),r=!!(0,v.usePluginSetting)("subscription"),i=(0,l.useDispatch)(ct),a=i.setActiveSegment,o=i.addSegments;return s.createElement("ul",{className:"nab-segment-list"},t.map((function(t,n){return s.createElement("li",{key:t.id,className:wn()("nab-segment-list__item",{"nab-segment-list__item--is-active":t.id===e})},s.createElement(mt.Button,{disabled:t.id===e,onClick:function(){return a(t.id)}},(0,d.trim)(t.attributes.name)||ar(n)))})),!n&&r&&s.createElement("li",{className:"nab-segment-list__add-new-segment",key:"add-new-segment"},s.createElement(mt.Button,{className:"nab-segment-list__add-new-segment-button",variant:"link",onClick:function(){var e=(0,b.createSegment)();o(e),a(e.id)}},s.createElement(mt.Dashicon,{icon:"plus"}),s.createElement("span",null,(0,We._x)("New","command (segment)","nelio-ab-testing")))))},nr=function(){return c((function(e){var t;return null===(t=e(ct).getActiveSegment())||void 0===t?void 0:t.id}))},rr=function(){return c((function(e){return e(ct).getSegments()||[]}))},ir=function(){return _t("status")[0].includes("paused")},ar=function(e){return(0,We.sprintf)(/* translators: a number */ /* translators: a number */
(0,We._x)("Segment %d","text","nelio-ab-testing"),e+1)},or=function(){return or=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},or.apply(this,arguments)},sr=function(){var e=lr(),t=e[0],n=e[1],r=_t("status")[0],i=ur(),a=i[0],o=i[1],l=!!(0,v.usePluginSetting)("subscription"),c=(0,v.usePluginSetting)("segmentEvaluation"),u=(r||"").includes("paused"),m=cr(),d=!u;return s.createElement("div",{className:"nab-edit-experiment__segmentation-section"},s.createElement("h2",null,(0,s.createInterpolateElement)((0,We.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,We._x)("%s Segmentation","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(mt.Dashicon,{className:"nab-segmentation-section__title-icon",icon:"groups"})}),"custom"===c&&s.createElement("div",{className:"nab-edit-experiment-segmentation-section__strategy"},s.createElement(mt.SelectControl,{value:a,options:[{value:"site",label:(0,We._x)("Evaluate on Site Landing","command","nelio-ab-testing")},{value:"tested-page",label:(0,We._x)("Evaluate on Tested Pages","text","nelio-ab-testing")}],onChange:o}))),l?s.createElement("div",{className:"nab-edit-experiment-segmentation-section__content"},s.createElement(tr,null),t?s.createElement($n,{name:t.attributes.name,setName:function(e){return n(or(or({},t.attributes),{name:e}))},removeSegment:d?m:void 0}):s.createElement("p",{className:"nab-edit-experiment-segmentation-section__content--empty"},(0,We._x)("Add a new segment to narrow your tested audience and target only a subset of your visitors.","user","nelio-ab-testing"))):s.createElement("div",{className:"nab-edit-experiment-segmentation-section__content nab-edit-experiment-segmentation-section__content--free"},s.createElement("p",null,(0,We._x)("All your visitors participate in this test. Segmentation allows you to narrow your tested audience and target only a subset of your visitors.","user","nelio-ab-testing")),s.createElement("div",{className:"nab-edit-experiment-segmentation-section__content-action"},s.createElement(mt.ExternalLink,{className:"components-button is-secondary",href:(0,b.addFreeTracker)((0,We._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,We._x)("Subscribe to Unlock Segmentation","user","nelio-ab-testing")))))},lr=function(){var e=c((function(e){return e(ct).getActiveSegment()})),t=(0,l.useDispatch)(ct).updateSegment;return[e,function(n){(null==e?void 0:e.id)&&t(e.id,n)}]},cr=function(){var e=lr()[0],t=c((function(e){return e(ct).getSegments()})),n=(0,l.useDispatch)(ct),r=n.removeSegments,i=n.setActiveSegment;return e?function(){var n=function(e,t){var n=(0,d.findIndex)(e,{id:t});return e[n+1]||e[n-1]||!1}(t,e.id);n&&i(n.id),r(e.id)}:function(){return null}},ur=function(){return[c((function(e){return e(ct).getSegmentEvaluation()})),(0,l.useDispatch)(ct).setSegmentEvaluation]},mr=function(){var e=_t("status")[0];return s.createElement(mt.PanelRow,{className:"nab-experiment-management__status"},s.createElement("span",null,(0,We._x)("Status","text","nelio-ab-testing")),s.createElement("strong",{className:"nab-experiment-management__status-value"},function(e){switch(e){case"draft":return(0,We._x)("Draft","text (experiment status)","nelio-ab-testing");case"ready":return(0,We._x)("Ready","text (experiment status)","nelio-ab-testing");case"scheduled":return(0,We._x)("Scheduled","text (experiment status)","nelio-ab-testing");case"paused":return(0,We._x)("Paused","text (experiment status)","nelio-ab-testing");case"paused_draft":return(0,We._x)("Paused Draft","text (experiment status)","nelio-ab-testing");case"running":case"finished":case"trash":return"-"}}(e)))},dr=function(){var e=_t("startDate"),t=e[0],n=e[1],r=ht("professional"),i=pr();return s.createElement(mt.PanelRow,{className:"nab-experiment-start-schedule"},s.createElement("span",null,(0,We._x)("Start","text","nelio-ab-testing")),s.createElement("span",null,!!i&&s.createElement("span",{className:"nab-experiment-start-schedule__date"},(0,pt.formatI18nDatetime)(t)),!i&&!r&&s.createElement("span",{className:"nab-experiment-start-schedule__date"},(0,We._x)("Immediately","text","nelio-ab-testing")),!i&&!!r&&s.createElement(Bt.DateTimePicker,{className:"nab-experiment-start-schedule__date",date:t,onChange:function(e){return n(e||"")},noDateLabel:(0,We._x)("Immediately","text","nelio-ab-testing"),readonly:!0})))},pr=function(){return _t("status")[0].includes("paused")};const vr=window.wp.compose,gr=window.nab.i18n;var fr=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},br=function(){var e=(0,vr.useInstanceId)(br),t=ht("professional"),n=_t("endMode")[0],r=_t("endValue")[0],i=Er(),a=yr[n],o=xr(),c=o[0],u=o[1],m=(0,l.useDispatch)(ct).setExperimentData,d=function(e,t){return m({endMode:e,endValue:t})};return t?s.createElement(mt.PanelRow,{className:"nab-experiment-end-schedule"},s.createElement("span",null,(0,We._x)("End","text","nelio-ab-testing")),s.createElement(mt.Dropdown,{placement:"bottom-end",contentClassName:"nab-experiment-end-schedule__dropdown",renderToggle:function(t){var i=t.onToggle,a=t.isOpen;return s.createElement(s.Fragment,null,s.createElement("label",{className:"nab-experiment-end-schedule__value screen-reader-text",htmlFor:"nab-experiment-end-schedule__toggle-".concat(e)},(0,We._x)("Click to change","command","nelio-ab-testing")),s.createElement(mt.Button,{variant:"link",id:"nab-experiment-end-schedule__toggle-".concat(e),type:"button",className:"nab-experiment-end-schedule__toggle",onClick:i,"aria-expanded":a,"aria-live":"polite"},function(e,t){switch(e){case"duration":return(0,We.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,We._n)("After %d day","After %d days",t,"nelio-ab-testing"),t);case"page-views":return(0,We.sprintf)(/* translators: a number */ /* translators: a number */
(0,We._n)("After %s page view","After %s page views",t,"nelio-ab-testing"),(0,gr.numberFormat)(t));case"confidence":return(0,We.sprintf)(/* translators: a percentage number, such as “95” */ /* translators: a percentage number, such as “95” */
(0,We._x)("At %1$s%% confidence","text","nelio-ab-testing"),(0,gr.numberFormat)(t));case"manual":return(0,We._x)("Manual","text","nelio-ab-testing")}}(n,r)))},renderContent:function(){return s.createElement(s.Fragment,null,s.createElement(mt.SelectControl,{label:(0,We._x)("End Mode","text","nelio-ab-testing"),value:n,onChange:function(e){u(!1),d(e,function(e){switch(e){case"duration":return 15;case"page-views":return 5e3;case"confidence":return 97;case"manual":return 0}}(e))},options:_r.filter((function(e){return"confidence"!==e.value||"nab/heatmap"!==i}))}),!!a&&s.createElement("div",{style:{marginTop:"1em"}},s.createElement(mt.SelectControl,{label:(0,We._x)("Value","text","nelio-ab-testing"),onChange:function(e){u("custom"===e),d(n,Number.parseInt(e)||0)},value:c?"custom":"".concat(r),options:a})),!!a&&c&&s.createElement("div",{style:{marginTop:"0.5em"}},s.createElement(mt.TextControl,{type:"number",placeholder:hr(n),value:r||"",onChange:function(e){return d(n,Number.parseInt(e)||0)}})))}})):s.createElement(mt.PanelRow,{className:"nab-experiment-end-schedule"},s.createElement("span",null,(0,We._x)("End","text","nelio-ab-testing")),s.createElement("span",null,(0,We._x)("Manual","text","nelio-ab-testing")))},Er=function(){return c((function(e){return e(ct).getExperimentType()}))},xr=function(){var e=_t("endMode")[0],t=_t("endValue")[0],n=yr[e],r=!!(0,d.find)(n,{value:"custom"})&&!(0,d.find)(n,{value:"".concat(t)}),i=(0,s.useState)(r);return[i[0],i[1]]},_r=[{value:"manual",label:(0,We._x)("Manual","text","nelio-ab-testing")},{value:"duration",label:(0,We._x)("Duration","text","nelio-ab-testing")},{value:"page-views",label:(0,We._x)("Page Views","text","nelio-ab-testing")},{value:"confidence",label:(0,We._x)("Confidence","text","nelio-ab-testing")}],yr={manual:[],confidence:[95,96,97,98,99].map((function(e){return{value:"".concat(e),label:(0,We.sprintf)(/* translators: a percentage number, such as “95” */ /* translators: a percentage number, such as “95” */
(0,We._x)("%1$s%%","text","nelio-ab-testing"),(0,gr.numberFormat)(e))}})),duration:fr(fr([],[5,7,15,30,60,90].map((function(e){return{value:"".concat(e),label:(0,We.sprintf)(/* translators: number of days */ /* translators: number of days */
(0,We._n)("%d day","%d days",e,"nelio-ab-testing"),e)}})),!0),[{value:"custom",label:(0,We._x)("Custom","text","nelio-ab-testing"),placeholder:(0,We._x)("Days","text","nelio-ab-testing")}],!1),"page-views":fr(fr([],[2500,5e3,1e4,2e4,5e4,1e5].map((function(e){return{value:"".concat(e),label:(0,gr.numberFormat)(e)}})),!0),[{value:"custom",label:(0,We._x)("Custom","text","nelio-ab-testing"),placeholder:(0,We._x)("Days","text","nelio-ab-testing")}],!1)},hr=function(e){var t,n;return null!==(n=null===(t=(0,d.find)(yr[e],{value:"custom"}))||void 0===t?void 0:t.placeholder)&&void 0!==n?n:""},Sr=function(){var e=Ar(),t=(0,l.useDispatch)(ct).moveToTrash;return s.createElement(mt.PanelBody,{className:"nab-experiment-management",title:(0,We._x)("Status & Management","text (experiment)","nelio-ab-testing")},s.createElement(mr,null),s.createElement(dr,null),s.createElement(br,null),e&&s.createElement(mt.PanelRow,{className:"nab-experiment-management__trash"},s.createElement(mt.Button,{variant:"tertiary",isDestructive:!0,onClick:function(){t()}},(0,We._x)("Move to Trash","command (experiment)","nelio-ab-testing"))))},Ar=function(){return c((function(e){return e(v.store).hasCapability("delete_nab_experiments")}))},wr=function(){var e=_t("description"),t=e[0],n=e[1];return s.createElement(mt.PanelBody,{className:"nab-experiment-description",title:(0,We._x)("Description","text","nelio-ab-testing")},s.createElement(mt.TextareaControl,{label:(0,We._x)("Describe your test (optional)","user","nelio-ab-testing"),className:"nab-experiment-description__textarea",value:t,onChange:n}))},Nr=function(e){var t=e.rules,n=e.scopeSupport,r=(0,s.useState)("partial"),i=r[0],a=r[1],o=(0,s.useState)(""),c=o[0],u=o[1],m=(0,l.useDispatch)(ct).addScopeRules,p=c&&(0,b.isUrlFragmentInvalid)(c)||"";return s.createElement("div",{className:"nab-experiment-scope__new-rule-form"},s.createElement(mt.SelectControl,{className:"nab-experiment-scope__new-rule-mode",label:(0,We._x)("Select URL matching mode","user","nelio-ab-testing"),value:i,options:Ir,onChange:function(e){return a(e)}}),s.createElement(mt.TextControl,{className:"nab-experiment-scope__new-rule-value",label:(0,We._x)("Write a URL","user","nelio-ab-testing"),value:c,onChange:u}),s.createElement(Bt.ErrorText,{value:p}),s.createElement(mt.PanelRow,{className:"nab-experiment-scope__add-rule-action-container"},s.createElement(mt.Button,{variant:"secondary",onClick:function(){u(""),"custom-with-tested-post"!==n||t.length?m([(0,b.createScopeRule)({type:i,value:c})]):m([(0,b.createScopeRule)({type:"tested-post"}),(0,b.createScopeRule)({type:i,value:c})])},disabled:(0,b.isEmpty)((0,d.trim)(c)),className:"nab-experiment-scope__add-rule-action"},(0,We._x)("Add","command","nelio-ab-testing"))))},Ir=[{value:"partial",label:(0,We._x)("URL contains the expected value","text","nelio-ab-testing")},{value:"exact",label:(0,We._x)("URL exactly matches the expected value","text","nelio-ab-testing")}],Tr=function(e){var t=e.rules,n=e.scopeSupport,r=(0,l.useDispatch)(ct).removeScopeRules;return t.length?s.createElement(s.Fragment,null,s.createElement("p",null,"custom-with-tested-post"===n?(0,We._x)("Variants will be visible only on pages matching the following criteria, as well as on the tested element’s page.","text","nelio-ab-testing"):(0,We._x)("Variants will be visible only on pages matching the following criteria:","text","nelio-ab-testing")),s.createElement("ul",{className:"nab-experiment-scope__rule-list"},t.filter(Rr).map((function(e){var i=e.id,a=e.attributes,o=a.value,l=a.type;return s.createElement("li",{key:i,className:"nab-experiment-scope__rule-list-item"},s.createElement("span",{className:"nab-experiment-scope__active-rule-type"},"exact"===l&&(0,We._x)("URL is:","text","nelio-ab-testing"),"partial"===l&&(0,We._x)("URL contains:","text","nelio-ab-testing")),s.createElement("input",{type:"text",className:"nab-experiment-scope__active-rule-value",value:o,readOnly:!0}),s.createElement(mt.Button,{variant:"link",isDestructive:!0,className:"nab-experiment-scope__remove-rule-action",onClick:function(){return function(e){"custom-with-tested-post"===n&&2===t.length?r((0,d.map)(t,"id")):r(e)}(i)}},(0,We._x)("Delete","command","nelio-ab-testing")))})))):s.createElement("p",null,"custom-with-tested-post"===n?(0,We._x)("Variants will be visible on all the pages of your website, including that of the tested element.","user","nelio-ab-testing"):(0,We._x)("Variants will be visible on all the pages of your website.","user","nelio-ab-testing")," ",(0,We._x)("If you wish to limit its scope to certain pages only, use the following form to define the URLs in which the test should run.","user","nelio-ab-testing"))},Rr=function(e){return"exact"===e.attributes.type||"partial"===e.attributes.type},Or=function(e){var t=e.rules,n=Dr(t);return s.createElement(s.Fragment,null,t.length?s.createElement("p",null,(0,We._x)("Variants will be visible only on the tested element’s page.","text","nelio-ab-testing")):s.createElement("p",null,(0,We._x)("Variants will be visible on the tested element’s page. All other pages will also show the appropriate variant of this test whenever the tested element appears on them.","text","nelio-ab-testing")),s.createElement(mt.CheckboxControl,{label:(0,We._x)("Global Consistency","command","nelio-ab-testing"),checked:!t.length,onChange:function(){return n(!t.length)}}))},Dr=function(e){var t=(0,l.useDispatch)(ct),n=t.addScopeRules,r=t.removeScopeRules;return function(t){r((0,d.map)(e,"id")),t&&n((0,b.createScopeRule)({type:"tested-post"}))}},Cr=function(){var e=kr(),t=Pr(),n=Gr();return t?n?null:s.createElement(mt.PanelBody,{className:"nab-experiment-scope",title:(0,We._x)("Test Scope","text","nelio-ab-testing")},"tested-post-with-consistency"===t?s.createElement(Or,{rules:e}):s.createElement(s.Fragment,null,s.createElement(Tr,{rules:e,scopeSupport:t}),s.createElement(Nr,{rules:e,scopeSupport:t}))):null},kr=function(){return c((function(e){return e(ct).getScope()}))},Pr=function(){return c((function(e){return(0,e(xt.store).getExperimentSupport)((0,e(ct).getExperimentType)(),"scope")}))},Gr=function(){return c((function(e){var t=e(ct).getAlternative("control");return!!(null==t?void 0:t.attributes.testAgainstExistingContent)}))},Br=function(){var e=Lr();return s.createElement("div",{className:"nab-edit-experiment-sidebar",style:e},s.createElement("div",{className:"nab-edit-experiment-sidebar__element-wrapper"},s.createElement("h2",{className:"nab-edit-experiment-sidebar__section-title"},(0,s.createInterpolateElement)((0,We.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,We._x)("%s Additional Settings","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(mt.Dashicon,{className:"nab-edit-experiment-sidebar__section-title-icon",icon:"admin-settings"})})),s.createElement(Sr,null),s.createElement(wr,null),s.createElement(Cr,null)))},Lr=function(){return c((function(e){var t=(0,e(v.store).getPageAttribute)("sidebarDimensions"),n=t.applyFix,r=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(t,["applyFix"]);return n?r:void 0}))},Mr=function(){return Mr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Mr.apply(this,arguments)},Vr=function(e,t,n){if(n||2===arguments.length)for(var r,i=0,a=t.length;i<a;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))},Ur=function(e){var t=e.alternativeId,n=e.disabled,r=e.index,i=qr("control"),a=qr(t),o=Yr(r),c=Hr(),u=jr(),m=Xr(r),d=Wr(),p=zr(),v=!r,g=St(),f=Fr(a),E=Jr(a,i),x=(0,l.useDispatch)(ct),_=x.saveExperimentAndEditAlternative,y=x.saveExperimentAndPreviewAlternative,h=x.removeAlternatives,S=x.replaceAlternatives,A=x.setAlternative;return a?s.createElement("div",{className:wn()(["nab-alternative-list__alternative",{"nab-alternative-list__alternative--original":v}])},s.createElement("p",{className:wn()(["nab-alternative-list__alternative-letter",{"nab-alternative-list__alternative-letter--disabled":0<r&&n}])},(0,b.getLetter)(r)),s.createElement("div",{className:"nab-alternative-list__alternative-edit"},s.createElement(o,{attributes:a.attributes,disabled:n,experimentType:u,setAttributes:function(e){return A(a.id,Mr(Mr({},a),{attributes:(0,b.omitUndefineds)(Mr(Mr({},a.attributes),e))}))}}),0!==r&&s.createElement("ul",{className:"nab-alternative-list__alternative-actions"},p&&s.createElement("li",null,s.createElement(mt.Button,{variant:"link",disabled:n||d,onClick:function(){_(t)}},(0,We._x)("Edit","command","nelio-ab-testing"))),s.createElement("li",null,s.createElement(mt.Button,{variant:"link",disabled:n||d||E,onClick:function(){y(t)}},(0,We._x)("Preview","command","nelio-ab-testing"))),p&&!a.base&&g&&s.createElement("li",null,s.createElement(mt.Button,{variant:"link",disabled:n||d,onClick:f},(0,We._x)("Duplicate","command","nelio-ab-testing"))),p&&s.createElement("li",null,s.createElement(mt.Button,{variant:"link",disabled:n||d,onClick:function(){return S(t,(0,b.createAlternative)())}},(0,We._x)("Reset","command","nelio-ab-testing"))),c&&s.createElement("li",null,s.createElement(mt.Button,{variant:"link",isDestructive:!0,disabled:n||d,onClick:function(){return h(a.id)}},(0,We._x)("Delete","command","nelio-ab-testing"))))),s.createElement("div",{className:"nab-alternative-list__alternative-help"},!!m&&s.createElement(Bt.HelpIcon,{text:m}))):null},jr=function(){return c((function(e){return e(ct).getExperimentType()}))},Fr=function(e){var t=c((function(e){return e(ct).getAlternatives()})),n=(0,l.useDispatch)(ct).replaceAlternatives;return e?function(){n(t.map((function(e){return e.id})),Vr(Vr([],t,!0),[(0,b.duplicateAlternative)(e)],!1))}:function(){}},qr=function(e){var t,n=(0,s.useState)(!1),r=n[0],i=n[1],a=(t=jr(),c((function(e){var n;return null===(n=e(xt.store).getExperimentType(t))||void 0===n?void 0:n.defaults}))),o=(0,l.useDispatch)(ct).setAlternative,u=c((function(t){return t(ct).getAlternative(e)}));return(0,s.useEffect)((function(){if(!r&&a&&u){var t="control"===e?a.original:a.alternative;o(u.id,Mr(Mr({},u),{attributes:Mr(Mr({},t),u.attributes)})),i(!0)}}),[r,!!a,!!u]),r?u:void 0},Hr=function(){var e=_t("status")[0];return c((function(t){var n=t(ct).getAlternativeIds,r=(e||"").includes("paused");return n().length>2&&!r}))},Wr=function(){return c((function(e){return e(ct).isExperimentBeingSaved()}))},Yr=function(e){return c((function(t){var n=(0,t(xt.store).getExperimentView)((0,t(ct).getExperimentType)(),e?"alternative":"original");return null!=n?n:function(){return s.createElement(s.Fragment,null)}}))},Xr=function(e){return c((function(t){var n=t(ct).getExperimentType,r=t(xt.store).getHelpString;return 0===e?r(n(),"original"):1===e?r(n(),"alternative"):""}))},zr=function(){var e=jr(),t=c((function(e){return e(ct).getAlternative("control")}));return c((function(n){var r=(0,n(xt.store).getExperimentSupport)(e,"alternativeEdition");return"external"===(null==r?void 0:r.type)&&("function"!=typeof r.enabled||!!t&&r.enabled(t.attributes))}))},Jr=function(e,t){return c((function(n){var r,i,a=(0,n(xt.store).getExperimentType)(n(ct).getExperimentType());return!!(a&&e&&t)&&!!(null===(i=(r=a.checks).isAlternativePreviewDisabled)||void 0===i?void 0:i.call(r,e.attributes,t.attributes,n))}))},Qr=function(){var e=(0,l.useDispatch)(ct).closeAlternativePreviewer,t=c((function(e){return e(ct).getAlternativePreviewerUrl()}));return t?s.createElement(mt.Modal,{className:"nab-alternative-previewer",title:(0,We._x)("Alternative Preview","text","nelio-ab-testing"),isDismissible:!0,onRequestClose:e,shouldCloseOnClickOutside:!1},s.createElement("iframe",{className:"nab-alternative-previewer__iframe",title:(0,We._x)("Alternative Preview Frame","text","nelio-ab-testing"),src:t})):null},$r=function(){var e=Kr(),t=e[0],n=e.slice(1),r=Zr(),i=At(),a=wt(),o=ei(),l=ti(),c=St();return s.createElement("div",{className:"nab-edit-experiment__alternative-section"},s.createElement("h2",null,(0,s.createInterpolateElement)((0,We.sprintf)(/* translators: dashicon */ /* translators: dashicon */
(0,We._x)("%s Control Version and Variants","text","nelio-ab-testing"),"<icon></icon>"),{icon:s.createElement(mt.Dashicon,{className:"nab-alternative-section__title-icon",icon:"randomize"})})),s.createElement("div",{className:"nab-alternative-list"},!!t&&s.createElement(Ur,{key:"control",index:0,alternativeId:"control",disabled:o}),s.createElement(Bt.AnimatedList,{disableAnimations:l,exit:500},n.map((function(e,t){return s.createElement(Ur,{key:e,index:t+1,alternativeId:e,disabled:o})})))),s.createElement("div",{className:"nab-edit-experiment-alternative-section__new-variant-container"},c&&s.createElement(mt.Button,{variant:"secondary",key:"new-variant",disabled:o,onClick:function(){return r()}},(0,We._x)("New Variant","command","nelio-ab-testing")),!i&&!a&&s.createElement(mt.ExternalLink,{className:"components-button is-secondary",href:(0,b.addFreeTracker)((0,We._x)("https://neliosoftware.com/testing/pricing/","text","nelio-ab-testing"))},(0,We._x)("Subscribe to Add More Variants","user","nelio-ab-testing"))),s.createElement(Qr,null))},Kr=function(){return c((function(e){return e(ct).getAlternativeIds()}))},Zr=function(){var e=(0,l.useDispatch)(ct).addAlternatives;return function(){return e((0,b.createAlternative)())}},ei=function(){return c((function(e){return e(ct).isTestedElementInvalid()}))},ti=function(){var e,t,n,r,i,a=(0,s.useState)([]),o=a[0],l=a[1],c=o.join(";"),u=Kr(),m=u.join(";");return(0,s.useEffect)((function(){c!==m&&l(u)}),[c,m]),c!==m&&(e=m,t=c.split(";"),n=e.split(";"),r=(0,d.difference)(t,n),i=(0,d.difference)(n,t),!!r.length&&!!i.length)},ni=function(){var e=ri(),t=(0,l.useDispatch)(Ye.store).removeNotice;return s.createElement("div",{className:"nab-edit-experiment-layout"},s.createElement(It,null),s.createElement(Lt,null),s.createElement("div",{className:"nab-edit-experiment-layout__body"},s.createElement("div",{className:"nab-edit-experiment-layout__content",role:"region","aria-label":(0,We._x)("Editor content","text","nelio-ab-testing"),tabIndex:-1},!(0,b.isEmpty)(e)&&s.createElement(mt.NoticeList,{className:"nab-edit-experiment-layout__notices",notices:e,onRemove:t}),s.createElement(Yt,null),s.createElement($r,null),s.createElement(Dn,null),s.createElement(sr,null)),s.createElement(Br,null)))},ri=function(){return c((function(e){return e(Ye.store).getNotices()}))},ii=[{label:(0,We._x)("What is the original page or post of a test?","text","nelio-ab-testing"),link:(0,We._x)("https://neliosoftware.com/testing/help/what-is-the-original-page-or-post-of-a-test/","text","nelio-ab-testing")},{label:(0,We._x)("Why don’t all my posts/pages appear in the selection list when I’m creating a new test?","text","nelio-ab-testing"),link:(0,We._x)("https://neliosoftware.com/testing/help/why-dont-all-my-posts-appear-in-the-selection-list/","text","nelio-ab-testing")},{label:(0,We._x)("What is a conversion and what counts as one?","text","nelio-ab-testing"),link:(0,We._x)("https://neliosoftware.com/testing/help/what-is-a-conversion/","text","nelio-ab-testing")},{label:(0,We._x)("How can I track conversions occurring in third-party websites?","text","nelio-ab-testing"),link:(0,We._x)("https://neliosoftware.com/testing/help/how-can-i-track-conversions-occurring-in-third-party-websites/","text","nelio-ab-testing")}];function ai(e){var t,n,r,i,a=(0,l.select)(xt.store).getExperimentType(e),o=(0,l.select)(v.store).isSubscribedTo;return[{title:(0,We._x)("Test Editor","text","nelio-ab-testing"),intro:(0,We._x)("Welcome to the Test Editor. Here you’ll be able to select the element you want to test and create one or more variants to find out which one converts the most. As you can see, it’s quite similar to WordPress’ Block Editor: there’s a header, a sidebar, and a main area.","user","nelio-ab-testing")},{title:(0,We._x)("Name","text","nelio-ab-testing"),intro:(0,We._x)("You’ll notice that all test types have a similar user interface. When creating a new test, you’ll first have to name it. Just type in a descriptive name that helps you identify the test in the future.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-title")}},{title:(0,We._x)("Variants","text","nelio-ab-testing"),intro:(0,We._x)("Next, there’s a “Control Version and Variants” section. Use it to (a) identify the element you want to test and (b) create one or more split testing variants.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__alternative-section")}},{title:(0,We._x)("Variant A","text","nelio-ab-testing"),intro:null!==(n=null===(t=null==a?void 0:a.help)||void 0===t?void 0:t.original)&&void 0!==n?n:"",element:function(){return document.querySelector(".nab-alternative-list__alternative--original")},active:function(){var e;return!!(null===(e=null==a?void 0:a.help)||void 0===e?void 0:e.original)}},{title:(0,We._x)("Variant B","text","nelio-ab-testing"),intro:null!==(i=null===(r=null==a?void 0:a.help)||void 0===r?void 0:r.alternative)&&void 0!==i?i:"",element:function(){return document.querySelector(".nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)")},active:function(){var e;return!!(null===(e=null==a?void 0:a.help)||void 0===e?void 0:e.alternative)&&!!document.querySelector(".nab-alternative-list__alternative:not(.nab-alternative-list__alternative--original)")}},{title:(0,We._x)("Goals","text","nelio-ab-testing"),intro:(0,We._x)("Split tests help you to improve the conversion rate of your website. Here you can set up the goals a test pursues and the specific conversion actions that, when performed by a visitor, will trigger a conversion.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__goal-section")},active:function(){var e;return!(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.automaticGoalSetup)}},{title:(0,We._x)("Goals","text","nelio-ab-testing"),intro:(0,We._x)("Split tests help you to improve the conversion rate of your website. With this type of test, the conversion goal and conversion action that might trigger a conversion is already set up by Nelio A/B Testing.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__goal-section")},active:function(){var e;return!!(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.automaticGoalSetup)}},{title:(0,We._x)("Actions","text","nelio-ab-testing"),intro:(0,We._x)("Use these buttons to add the specific conversion actions that might trigger a conversion like, for example, “visiting a page” or “clicking an element on the page.”","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-conversion-action-type-list")},active:function(){return!!document.querySelector(".nab-conversion-action-type-list")}},{title:(0,We._x)("Segmentation","text","nelio-ab-testing"),intro:(0,We._x)("If you subscribe to Nelio A/B Testing, you’ll be able to segment your visitors into groups and specify who may or may not participate in a test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__segmentation-section")},active:function(){return!!document.querySelector(".nab-edit-experiment-segmentation-section__content--free")}},{title:(0,We._x)("Segmentation","text","nelio-ab-testing"),intro:(0,We._x)("You can segment your audience into different groups and look at the performance of your split test with respect to each group. You can also use segmentation to limit who may or may not participate in a test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-edit-experiment__segmentation-section")},active:function(){return!document.querySelector(".nab-edit-experiment-segmentation-section__content--free")}},{title:(0,We._x)("Status","text","nelio-ab-testing"),intro:(0,We._x)("Here you can see the current status of your test: once it’s “Ready,” you’ll be able to start it. Also, if you subscribe to our Professional plan, you’ll be able to schedule when a test should be started, as well as to define if and when it should be automatically stopped.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-management")},active:function(){return!o("professional")}},{title:(0,We._x)("Status","text","nelio-ab-testing"),intro:(0,We._x)("Here you can see the current status of your test: once it’s “Ready,” you’ll be able to start it. You can also schedule when the test should be started, as well as define a stop condition to automatically stop the test.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-management")},active:function(){return o("professional")}},{title:(0,We._x)("Scope","text","nelio-ab-testing"),intro:(0,We._x)("By default, this type of test will show up on all pages of your website. You can limit its scope by specifying the URLs in which the test should be visible.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-scope")},active:function(){var e,t;return"custom"===(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.scope)||"custom-with-tested-post"===(null===(t=null==a?void 0:a.supports)||void 0===t?void 0:t.scope)}},{title:(0,We._x)("Scope","text","nelio-ab-testing"),intro:(0,We._x)("This type of test applies to a specific element of your website, be it a page, a post, or what. If you enable “Global Consistency,” our plugin will also load the appropriate variant on any page in which the tested element (i.e. its title, featured image, and so on) shows up.","user","nelio-ab-testing"),element:function(){return document.querySelector(".nab-experiment-scope")},active:function(){var e;return"tested-post-with-consistency"===(null===(e=null==a?void 0:a.supports)||void 0===e?void 0:e.scope)}}]}var oi=function(e){var t=e.experimentId,n=c((function(e){return e(v.store).getExperiment(t)}));return(0,s.useEffect)((function(){var e;n&&(e=(0,l.select)(ct).getExperimentType(),(0,Bt.appendContextualHelp)({screen:"experiment-list:".concat(e),questions:ii,walkthrough:ai(e)}))}),[!!n]),s.createElement(s.StrictMode,null,s.createElement(ut,{experiment:n},s.createElement(ni,null)))};function si(e,t){var n,r,i=document.getElementById(e);i?((0,g.registerCoreExperiments)(),(0,p.registerCoreConversionActions)(),(0,f.registerCoreSegmentationRules)(),n=s.createElement(oi,{experimentId:t}),(r=i)&&(s.createRoot?(0,s.createRoot)(r).render(n):(0,s.render)(n,r))):console.warn("Unable to find container node ".concat(e,"."))}function li(){var e=window.innerHeight,t=document.getElementById("wpadminbar"),n=t?t.getBoundingClientRect().height:0;(0,(0,l.dispatch)(v.store).setPageAttribute)("sidebarDimensions",{top:n,height:"".concat(e-n,"px"),applyFix:782<=window.innerWidth})}window.addEventListener("resize",(0,d.debounce)(li,100)),m(li)},6942:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function i(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=o(e,a(n)))}return e}function a(e){if("string"==typeof e||"number"==typeof e)return e;if("object"!=typeof e)return"";if(Array.isArray(e))return i.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=o(t,n));return t}function o(e,t){return t?e?e+" "+t:e+t:e}e.exports?(i.default=i,e.exports=i):void 0===(n=function(){return i}.apply(t,[]))||(e.exports=n)}()}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,i,a)=>{if(!n){var o=1/0;for(u=0;u<e.length;u++){n=e[u][0],i=e[u][1],a=e[u][2];for(var s=!0,l=0;l<n.length;l++)(!1&a||o>=a)&&Object.keys(r.O).every((e=>r.O[e](n[l])))?n.splice(l--,1):(s=!1,a<o&&(o=a));if(s){e.splice(u--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[n,i,a]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={6008:0,117:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,a,o=n[0],s=n[1],l=n[2],c=0;if(o.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(l)var u=l(r)}for(t&&t(n);c<o.length;c++)a=o[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(u)},n=self.webpackChunknab=self.webpackChunknab||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=r.O(void 0,[117],(()=>r(9170)));i=r.O(i);var a=nab="undefined"==typeof nab?{}:nab;for(var o in i)a[o]=i[o];i.__esModule&&Object.defineProperty(a,"__esModule",{value:!0})})();